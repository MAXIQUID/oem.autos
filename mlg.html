<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
  <title>Tap the Dot</title>
  <style>
    html, body { height: 100%; margin: 0; background: #0a0b0f; -webkit-tap-highlight-color: transparent; }
    #gameArea { width: 100%; height: 100vh; background: #0f1113; position: relative; overflow: hidden; touch-action: none; }
    .dot {
      position: absolute; border-radius: 999px; background: linear-gradient(180deg, #34c759, #1ca64a);
      box-shadow: 0 8px 24px rgba(52,199,89,0.18), inset 0 -6px 10px rgba(0,0,0,0.12);
      width: 80px; height: 80px; user-select: none; -webkit-user-select: none; touch-action: none;
    }
    #stopBtn { position: fixed; top: 10px; right: 10px; padding: 8px 12px; background: linear-gradient(90deg, #ff4d4d, #ff6b6b); color: #140000; border-radius: 8px; border: 1px solid rgba(0,0,0,0.2); font-weight: 700; }
  </style>
</head>
<body>
  <div id="gameArea"></div>
  <button id="stopBtn">STOP</button>

<script>
const DOT_MIN = 56;
const DOT_MAX = 110;
const DOT_PADDING = 12;
const BASE_INTERVAL_MS = 220; // Base interval for sound bursts
const GOLDEN_RATIO = 1.618033988749895; // Ï† for harmonic layering
const SOUND_POOL = [
  "/media/sounds/are-you-out-of-your-mind-greenscreen-change-quality-and-end-wont-cut-off_2.mp3",
  "/media/sounds/tf_nemesis.mp3",
  "/media/sounds/among-us-role-reveal-sound.mp3",
  "/media/sounds/error_CDOxCYm.mp3",
  "/media/sounds/emotional-damage-meme.mp3",
  "/media/sounds/baby-laughing-meme.mp3",
  "/media/sounds/tmp_7901-951678082.mp3",
  "/media/sounds/meme-de-creditos-finales.mp3",
  "/media/sounds/fart-meme-sound.mp3",
  "/media/sounds/vine-boom-sound-effect_KT89XIq.mp3",
  "/media/sounds/spiderman-meme-song.mp3",
  "/media/sounds/punch-gaming-sound-effect-hd_RzlG1GE.mp3",
  "/media/sounds/run-vine-sound-effect.mp3",
  "/media/sounds/galaxy-meme.mp3",
  "/media/sounds/outro-song_oqu8zAg.mp3",
  "/media/sounds/snore-mimimimimimi.mp3",
  "/media/sounds/cat-laugh-meme-1.mp3",
  "/media/sounds/yt1s_wU4BGgD.mp3",
  "/media/sounds/my-movie-6_0RlWMvM.mp3",
  "/media/sounds/shocked-sound-effect.mp3",
  "/media/sounds/deja-vu.mp3",
  "/media/sounds/gta-san-andreas-ah-shit-here-we-go-again_BWv0Gvc.mp3",
  "/media/sounds/dun-dun-dun-sound-effect-brass_8nFBccR.mp3",
  "/media/sounds/999-social-credit-siren.mp3",
  "/media/sounds/oh-my-god-meme.mp3",
  "/media/sounds/directed-by-robert-b_voI2Z4T.mp3",
  "/media/sounds/french-meme-song.mp3",
  "/media/sounds/fartmeme.mp3",
  "/media/sounds/anime-wow-sound-effect-mp3cut.mp3",
  "/media/sounds/they-ask-you-how-you-are-and-you-just-have-to-say-that-youre-fine-sound-effect_IgYM1CV.mp3",
  "/media/sounds/huh_37bAoRo.mp3",
  "/media/sounds/ny-video-online-audio-converter.mp3",
  "/media/sounds/fbi-open-up_dwLhIFf.mp3",
  "/media/sounds/movie_1_C2K5NH0.mp3",
  "/media/sounds/what-bottom-text-meme-sanctuary-guardian-sound-effect-hd.mp3",
  "/media/sounds/long-brain-fart.mp3",
  "/media/sounds/nani-meme-sound-effect.mp3",
  "/media/sounds/what-are-you-doing-in-my-swamp-.mp3",
  "/media/sounds/tmpbxydyrz3.mp3",
  "/media/sounds/y2mate-mp3cut_sRzY6rh.mp3",
  "/media/sounds/bing-chilling_fcdGgUc.mp3",
  "/media/sounds/oh-no-no-no-tik-tok-song-sound-effect.mp3",
  "/media/sounds/auughhh.mp3",
  "/media/sounds/punch-sound-effect-meme.mp3",
  "/media/sounds/jojos-bizarre-adventure-ay-ay-ay-ay-_-sound-effect.mp3",
  "/media/sounds/frog-laughing-meme.mp3",
  "/media/sounds/danger-alarm-sound-effect-meme.mp3",
  "/media/sounds/english-or-spanish-song.mp3",
  "/media/sounds/meme-okay-lets-go.mp3",
  "/media/sounds/ladies-and-gentlemen-we-got-him-song.mp3",
  "/media/sounds/tmpq7mpzzl9.mp3",
  "/media/sounds/dobroe-utro-moia-devochka.mp3",
  "/media/sounds/steve-old-hurt-sound_XKZxUk4.mp3",
  "/media/sounds/ae-meme.mp3",
  "/media/sounds/guy-yelling-among-us-sound-effect.mp3",
  "/media/sounds/lightskin-rizz-sin-city.mp3",
  "/media/sounds/awolnation-run-audio-mp3cut_TdXTLux.mp3",
  "/media/sounds/lobotomy-sound-effect.mp3",
  "/media/sounds/rat-dance-music.mp3",
  "/media/sounds/loading-lost-connection-green-screen-with-sound-effect-2_K8HORkT.mp3",
  "/media/sounds/musica-de-sigma-estourado.mp3",
  "/media/sounds/bad-to-the-bone-meme.mp3",
  "/media/sounds/windows-xp-startup_1ph012N.mp3",
  "/media/sounds/galaxy-brain-meme.mp3",
  "/media/sounds/duck-toy-sound.mp3",
  "/media/sounds/let-her-go.mp3",
  "/media/sounds/sabe-porque-as-meninas-dao-maior-valor-na-risada-de-ladrao-mp3cut.mp3",
  "/media/sounds/meme-de-creditos-finales_qHtIjyQ.mp3",
  "/media/sounds/obi-wan_says_hello_thereyoutubetomp4.mp3",
  "/media/sounds/fire-in-the-hole-geometry-dash.mp3",
  "/media/sounds/u-got-that-mp3-fix.mp3",
  "/media/sounds/fail-sound-effect.mp3"
];

const baseUrl = "https://www.myinstants.com";
const gameArea = document.getElementById('gameArea');
const stopBtn = document.getElementById('stopBtn');
let activeDot = null;
let allowPlay = true;
let chaosTimers = [];

// Preload all audio files into DOM
function preloadAudio() {
  return SOUND_POOL.map(path => {
    const audio = new Audio(urlFor(path));
    audio.preload = 'auto';
    audio.volume = 0.6;
    audio.load();
    return audio;
  });
}

const urlFor = (p) => { try { return new URL(p, baseUrl).href } catch(e) { return baseUrl + p } }
const vibrate = (pattern) => { if (navigator.vibrate) try { navigator.vibrate(pattern); } catch(e) {} }
const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

function computeDotSize() {
  const w = Math.max(320, window.innerWidth);
  const base = Math.min(DOT_MAX, Math.max(DOT_MIN, Math.round(w * 0.12)));
  return base + Math.round((Math.random() - 0.5) * 18);
}

function spawnDot() {
  if (!allowPlay) return;
  if (activeDot) { activeDot.remove(); activeDot = null; }
  const rect = gameArea.getBoundingClientRect();
  const d = computeDotSize();
  const xMin = DOT_PADDING;
  const xMax = rect.width - d - DOT_PADDING;
  const yMin = DOT_PADDING;
  const yMax = rect.height - d - DOT_PADDING;
  const left = clamp(Math.random() * (xMax - xMin) + xMin, xMin, xMax);
  const top = clamp(Math.random() * (yMax - yMin) + yMin, yMin, yMax);

  const dot = document.createElement('button');
  dot.className = 'dot';
  dot.style.width = d + 'px';
  dot.style.height = d + 'px';
  dot.style.left = left + 'px';
  dot.style.top = top + 'px';
  dot.setAttribute('aria-label', 'Tap target');

  dot.animate([{ transform: 'scale(1)' }, { transform: 'scale(1.06)' }, { transform: 'scale(1)' }], { duration: 1200 + Math.random()*800, iterations: Infinity });

  dot.addEventListener('click', (ev) => {
    ev.stopPropagation();
    ev.preventDefault();
    if (!allowPlay) return;
    vibrate(18);
    spawnDot();
    if (chaosTimers.length === 0) {
      triggerGoldenChaos(audioQueue);
    }
  }, { passive: false });

  dot.addEventListener('touchstart', (ev) => {
    ev.stopPropagation();
    ev.preventDefault();
    dot.click();
  }, { passive: false });

  gameArea.appendChild(dot);
  activeDot = dot;
}

function triggerGoldenChaos(audioQueue) {
  const intervals = [
    BASE_INTERVAL_MS,
    Math.round(BASE_INTERVAL_MS * GOLDEN_RATIO), // ~356ms
    Math.round(BASE_INTERVAL_MS * GOLDEN_RATIO * GOLDEN_RATIO) // ~577ms
  ];

  intervals.forEach(interval => {
    const timer = setInterval(() => {
      const bursts = 1 + Math.floor(Math.random() * 2);
      for (let i = 0; i < bursts; i++) {
        setTimeout(() => {
          const audio = audioQueue[Math.floor(Math.random() * audioQueue.length)];
          audio.currentTime = 0;
          audio.play().catch(() => {});
        }, i * 50);
      }
    }, interval);
    chaosTimers.push(timer);
  });
}

function stopAll() {
  allowPlay = false;
  chaosTimers.forEach(timer => clearInterval(timer));
  chaosTimers = [];
  document.querySelectorAll('audio').forEach(a => {
    try { a.pause(); a.currentTime = 0; } catch(e) {}
  });
  if (activeDot) { activeDot.remove(); activeDot = null; }
  allowPlay = true;
  setTimeout(spawnDot, 250);
}

stopBtn.addEventListener('click', stopAll);

gameArea.addEventListener('touchstart', (ev) => {
  ev.preventDefault();
}, { passive: false });

window.addEventListener('keydown', (ev) => {
  if (ev.key === 'Enter' && activeDot) activeDot.click();
  if (ev.key === 'Escape') stopAll();
});

window.addEventListener('resize', () => {
  if (activeDot) spawnDot();
});

window.addEventListener('pagehide', stopAll);
window.addEventListener('beforeunload', stopAll);

// Preload and start
const audioQueue = preloadAudio();
setTimeout(spawnDot, 180);
</script>
</body>
</html>